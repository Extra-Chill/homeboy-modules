{
  "id": "wordpress",
  "name": "WordPress",
  "version": "1.0.0",
  "icon": "w.circle.fill",
  "description": "WordPress project type with WP-CLI integration",
  "author": "Extra Chill",
  "configSchema": "wordpress",

  "discovery": {
    "findCommand": "find /home -maxdepth 5 -name 'wp-config.php' -type f 2>/dev/null",
    "basePathTransform": "dirname",
    "displayNameCommand": "cd {{basePath}} && wp option get blogname --skip-themes --skip-plugins 2>/dev/null || basename {{basePath}}"
  },

  "cli": {
    "tool": "wp",
    "displayName": "WP-CLI",
    "commandTemplate": "cd {{sitePath}} && {{cliPath}} {{args}} --url={{domain}}",
    "defaultCLIPath": "wp"
  },

  "defaultPinnedFiles": ["wp-config.php", ".htaccess", "robots.txt"],
  "defaultPinnedLogs": ["wp-content/debug.log"],

  "database": {
    "cli": {
      "tablesCommand": "cd {{sitePath}} && {{cliPath}} db query \"SHOW TABLE STATUS\" --format={{format}} --url={{domain}}",
      "describeCommand": "cd {{sitePath}} && {{cliPath}} db query \"DESCRIBE {{table}}\" --format={{format}} --url={{domain}}",
      "queryCommand": "cd {{sitePath}} && {{cliPath}} db query \"{{query}}\" --format={{format}} --url={{domain}}"
    },

    "defaultTablePrefix": "wp_",
    "prefixDetectionSuffixes": ["options", "posts", "users"],

    "tableSuffixes": {
      "core": ["commentmeta", "comments", "links", "options", "postmeta",
               "posts", "termmeta", "terms", "term_relationships", "term_taxonomy"],
      "users": ["users", "usermeta"],
      "network": ["blogs", "blogmeta", "site", "sitemeta", "registration_log", "signups"]
    },

    "protectedSuffixes": ["options", "posts", "postmeta", "users", "usermeta",
                          "comments", "commentmeta", "terms", "termmeta",
                          "term_relationships", "term_taxonomy", "links",
                          "blogs", "blogmeta", "site", "sitemeta",
                          "registration_log", "signups"],

    "defaultGrouping": {
      "id": "wordpress-tables",
      "name": "WordPress Tables",
      "patternTemplate": "{{prefix}}*"
    },

    "multisiteGrouping": {
      "network": {
        "id": "wordpress-network",
        "name": "Network Tables"
      },
      "site": {
        "idTemplate": "wordpress-site-{{blogId}}",
        "nameTemplate": "{{siteName}}",
        "patternTemplate": "{{sitePrefix}}*"
      }
    }
  }
}
